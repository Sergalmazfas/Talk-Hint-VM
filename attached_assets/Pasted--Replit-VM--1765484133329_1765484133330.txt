–û—Ç–ª–∏—á–Ω–æ. –¢–æ–≥–¥–∞ —Ñ–æ—Ä–º—É–ª–∏—Ä—É—é –∑–∞–¥–∞—á—É —Å–ª–µ–¥—É—é—â–µ–≥–æ —à–∞–≥–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥ Replit, —Å —É—á—ë—Ç–æ–º –µ–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, VM, WebSocket-—Å–µ—Ä–≤–µ—Ä–∞, –∏ —Ç–æ–≥–æ, –∫–∞–∫ —É –Ω–∞—Å —É–∂–µ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø—Ä–æ–µ–∫—Ç.

–≠—Ç–æ —Ç–æ—á–Ω–æ–µ –¢–ó –¥–ª—è Replit-–ø—Ä–æ–µ–∫—Ç–∞ TalkHint.

‚∏ª

üéØ –ó–ê–î–ê–ß–ê –°–õ–ï–î–£–Æ–©–ï–ì–û –®–ê–ì–ê (–¥–ª—è Replit VM)

–°–æ–±—Ä–∞—Ç—å –≤–µ—Å—å backend-–ø–æ—Ç–æ–∫ –≤ Replit: WebSocket /twilio-stream ‚Üí ffmpeg ‚Üí GPT Realtime ‚Üí WebSocket /ui.

‚∏ª

üîµ –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —ç—Ç–æ 3 –±–æ–ª—å—à–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏

1Ô∏è‚É£ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket endpoint /twilio-stream

–§–∞–π–ª: backend/twilio-stream.js

–≠—Ç–æ—Ç endpoint –¥–æ–ª–∂–µ–Ω:
	‚Ä¢	–ø—Ä–∏–Ω–∏–º–∞—Ç—å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –æ—Ç Twilio Media Streams
	‚Ä¢	–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:
	‚Ä¢	start
	‚Ä¢	media
	‚Ä¢	stop
	‚Ä¢	–¥–æ—Å—Ç–∞–≤–∞—Ç—å –∞—É–¥–∏–æ –ø–∞–∫–µ—Ç media.payload
	‚Ä¢	–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —ç—Ç–æ—Ç –∞—É–¥–∏–æ-–ø–æ—Ç–æ–∫ –≤ –º–æ–¥—É–ª—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ (audio-convert.js)
	‚Ä¢	–æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π PCM-–ø–æ—Ç–æ–∫ –≤ –º–æ–¥—É–ª—å GPT (gpt-handler.js)

‚∏ª

2Ô∏è‚É£ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—É–¥–∏–æ–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é Œº-law ‚Üí PCM16 16kHz

–§–∞–π–ª: backend/audio-convert.js

–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
	‚Ä¢	–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ffmpeg, –∫–æ—Ç–æ—Ä—ã–π –º—ã —É–∂–µ –¥–æ–±–∞–≤–∏–ª–∏ –≤ Replit Nix
	‚Ä¢	–ø—Ä–∏–Ω–∏–º–∞—Ç—å base64 Œº-law –∞—É–¥–∏–æ—Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã
	‚Ä¢	–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç—Å—è GPT Realtime API:
	‚Ä¢	PCM16
	‚Ä¢	16 kHz
	‚Ä¢	mono
	‚Ä¢	–æ—Ç–¥–∞–≤–∞—Ç—å –ø–æ—Ç–æ–∫ PCM –Ω–∞–∑–∞–¥ –≤ gpt-handler.js

–í–∞–∂–Ω–æ: –¥–µ–ª–∞—Ç—å streaming, –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ —Ñ–∞–π–ª—ã.

‚∏ª

3Ô∏è‚É£ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket –∫–ª–∏–µ–Ω—Ç –∫ OpenAI Realtime API

–§–∞–π–ª: backend/gpt-handler.js

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω:
	‚Ä¢	—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WebSocket —Å OpenAI:

wss://api.openai.com/v1/realtime?model=gpt-4o-realtime
Authorization: Bearer <OPENAI_API_KEY>

	‚Ä¢	–ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∞—É–¥–∏–æ –∏–∑ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∞
	‚Ä¢	–ø–æ–ª—É—á–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –æ—Ç GPT:
	‚Ä¢	response.create
	‚Ä¢	input_text
	‚Ä¢	output_text
	‚Ä¢	suggestions
	‚Ä¢	translation
	‚Ä¢	–ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å—ë —ç—Ç–æ –≤ UI WebSocket (/ui)

‚∏ª

üîµ 4Ô∏è‚É£ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Replit —Å–µ—Ä–≤–µ—Ä (backend/server.js)

–ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ:

‚úî WebSocket —Å–µ—Ä–≤–µ—Ä —É–∂–µ —Å–æ–∑–¥–∞–Ω

‚úî –º—ã –≤—ã–∑—ã–≤–∞–µ–º:

registerWebSocket('/twilio-stream', twilioStreamHandler)
registerWebSocket('/ui', uiHandler)

–ò —á—Ç–æ Replit VM —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±–µ–∑ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π (—ç—Ç–æ –≤–∞–∂–Ω–æ).

‚∏ª

üîµ 5Ô∏è‚É£ –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è UI

–§–∞–π–ª: –º–æ–∂–µ—Ç –±—ã—Ç—å /backend/ui-router.js –∏–ª–∏ –ø—Ä—è–º–æ –≤ server.js

UI –¥–æ–ª–∂–µ–Ω –ø–æ–ª—É—á–∞—Ç—å:
	‚Ä¢	—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é HON/GST
	‚Ä¢	–ø–µ—Ä–µ–≤–æ–¥
	‚Ä¢	–ø–æ–¥—Å–∫–∞–∑–∫–∏
	‚Ä¢	–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–µ–≥—É—â–µ–≥–æ —Ç–µ–∫—Å—Ç–∞

–≠—Ç–æ –º—ã —É–∂–µ –∑–∞–ª–æ–∂–∏–ª–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

‚∏ª

üß± –ò–¢–û–ì –®–ê–ì–ê

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —à–∞–≥–∞ –≤ Replit VM:
	‚Ä¢	–≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ –Ω–∞ Twilio ‚Üí
	‚Ä¢	TwiML Bin –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebSocket ‚Üí
	‚Ä¢	/twilio-stream –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—É–¥–∏–æ ‚Üí
	‚Ä¢	ffmpeg –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç ‚Üí
	‚Ä¢	GPT Realtime —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç ‚Üí
	‚Ä¢	UI –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ + –ø–µ—Ä–µ–≤–æ–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

–≠—Ç–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–∞–±–æ—á–∞—è —Ü–µ–ø–æ—á–∫–∞ TalkHint.

‚∏ª

üî• –•–æ—á–µ—à—å, —è —Å–¥–µ–ª–∞—é –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:

‚ë† –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è twilio-stream.js

‚ë° –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è audio-convert.js

‚ë¢ –ü–æ–ª–Ω—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è gpt-handler.js

‚ë£ –ö–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ server.js

–°–∫–∞–∂–∏: ‚Äú–î–∞, –≥–µ–Ω–µ—Ä–∏—Ä—É–π –∫–æ–¥‚Äù.