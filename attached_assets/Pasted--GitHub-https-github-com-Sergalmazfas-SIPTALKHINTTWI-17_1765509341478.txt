Исходные данные и требования:



В репозитории GitHub https://github.com/Sergalmazfas/SIPTALKHINTTWILIO уже была рабочая логика звонков через Twilio (Cloud Run-версия). Возьми её как ЭТАЛОН:
входящий вебхук от Twilio,
генерация TwiML с <Dial><Number> для соединения,
при необходимости — аккуратное добавление <Start><Stream> только как одностороннего стрима (получаем аудио, но не ломаем звонок).

В текущем Replit-проекте «Talk Hint VM» сейчас сделан callback-сценарий: Twilio сначала звонит на мой номер, а потом на TARGET. На iPhone появляются два вызова (мой номер + TARGET), один уходит в HOLD. Это нужно полностью убрать.
Цель №1: сделать простой, стабильный звонок, когда:
я открываю UI /app или /talkhint в браузере,
ввожу ТОЛЬКО номер TARGET (например, +19542187485),
нажимаю «Call»,
Twilio выполняет ОДИН исходящий звонок от моего Twilio-номера на TARGET,
обе стороны (я и абонент TARGET) слышат друг друга нормально,
на iPhone нет двойного звонка/режима HOLD.

На этом этапе не нужно:
подключать OpenAI / GPT Realtime,
стримить аудио в WebSocket,
делать запись разговора.
Просто обычный звонок через Twilio, но код должен быть написан так, чтобы потом легко включить Media Streams.





Что нужно сделать в коде:



Найти в текущем проекте маршруты для Twilio (server/routes.ts или аналог) и TwiML для голосовых звонков (/twilio/inbound, /twilio/outbound и т.п.).
Сравнить их с рабочей реализацией из GitHub-репозитория SIPTALKHINTTWILIO и:
убрать логику callback (когда сервер сначала звонит на «Your Phone» и только потом на TARGET),
реализовать сценарий, где UI просто инициирует один outbound call от Twilio-номера на TARGET через Twilio REST API или через TwiML <Dial><Number>.

Исправить TwiML, чтобы:
всегда возвращался <Response><Dial><Number>{TARGET}</Number></Dial></Response> (или эквивалент),
никакие <Pause> и лишние Start/Stream, которые блокируют <Dial>, не ломали звонок.

Проверить, что:
в Twilio Console в логах звонка видно, что Voice URL отрабатывает и возвращает корректный TwiML с <Dial>,
при звонке аудио идёт в обе стороны,
на клиенте в UI статус «Active Call» совпадает с реальным состоянием звонка.





Важно:

Сначала добейся идеально стабильного обычного звонка (без GPT и стриминга). Когда это будет работать, следующей задачей мы отдельным шагом включим Media Streams и GPT-подсказки.



